<div
  class="modal modal-bottom sm:modal-middle"
  id="edit-recipe-modal"
  [class.modal-open]="isOpen()"
>
  <div class="modal-box">
    <h3 class="font-bold text-lg">{{ isEdit ? 'Edit Recipe' : 'Add Recipe' }}</h3>

    <form [formGroup]="form" (submit)="save()" class="flex flex-col gap-3 mt-4">
      <div class="grid grid-cols-2 gap-3">
        <input formControlName="title" required placeholder="Title" class="input input-bordered" />
        <input formControlName="category" placeholder="Category" class="input input-bordered" />
      </div>

      <div class="grid grid-cols-2 gap-3">
        <input formControlName="area" placeholder="Area" class="input input-bordered" />
        <input
          formControlName="thumbnail"
          placeholder="Thumbnail URL"
          class="input input-bordered"
        />
      </div>

      <textarea
        formControlName="instructions"
        placeholder="Instructions"
        rows="6"
        class="textarea textarea-bordered w-full"
      ></textarea>

      <div>
        <label class="font-semibold">Ingredients</label>
        <div formArrayName="ingredients">
          @for (ctrl of ingredients.controls; track $index) {
            <div [formGroupName]="$index" class="flex gap-2 items-center mt-2">
              <input
                formControlName="ingredient"
                placeholder="Ingredient"
                class="input input-bordered flex-1"
              />
              <input
                formControlName="measure"
                placeholder="Measure"
                class="input input-bordered w-40"
              />
              <button type="button" class="btn btn-sm btn-error" (click)="removeIngredient($index)">
                Remove
              </button>
            </div>
          }
        </div>
        <div class="mt-2">
          <button type="button" class="btn btn-ghost btn-sm" (click)="addIngredient()">
            Add ingredient
          </button>
        </div>
      </div>

      <div class="flex justify-end gap-2 mt-4">
        <button type="button" class="btn btn-ghost" (click)="close()">Cancel</button>
        <button type="submit" class="btn btn-primary">{{ isEdit ? 'Save' : 'Create' }}</button>
      </div>
    </form>
  </div>
</div>
